(function(a){a.vast={}})(jwplayer);(function(b){var g=b.vast,a=b.utils,d=b.events,e=window,c=true,f=false;b.vast.adcontroller=function(ad,Q,ah){var k=ad,ag=ah,H,ak=Q,w=this,o,al,F,ab=f,I=f,R,C,X,m=f,n,t,J,aa={},p={},af=f,W=f;k.onReady(aj);ag.style.width="100%";function aj(){if(k.getRenderingMode()=="flash"){ah.style.visibility="hidden"}if(Q.debug){H=k.id}R=new g.companion();M();var an=new g.configparser();an.parse(ak);al=an.getSchedule();o=an.getOptParams();k.onBeforePlay(D);k.onTime(T);k.onBeforeComplete(i);k.onComplete(P);k.onResize(U);k.onFullscreen(E);k.onPlaylistItem(ai);k.onPlaylistComplete(ai)}function D(){var an=al.getPreRoll();if(!af&&an){af=c;n="pre";am(an)}}function T(an){var ao=al.getNextMidRoll(an.position);if(ao){n="mid";am(ao)}}function i(){var an=al.getPostRoll();if(!W&&an){W=c;n="post";k.detachMedia();am(an)}}function ai(){W=f;af=f;n="";P();al.reset()}function am(ao){t=ao._adTag;F=new g.vloader();F.addEventListener(d.COMPLETE,V);F.addEventListener(d.ERROR,K);var an=w.doReplacement(t);if(H){b._=b._||{};b._[H]=b._[H]||{};b._[H].actualTag=an;b._[H].originalTag=t}F.load(an)}w.doReplacement=function(ao){var ar=k.getPlaylistItem(),an=e.location.href;ao=w.doReplace(ao,"__random-number__",Math.random()*Math.pow(10,18));ao=w.doReplace(ao,"__timestamp__",new Date().getTime());ao=w.doReplace(ao,"__page-url__",encodeURIComponent(an));ao=w.doReplace(ao,"__referrer__",encodeURIComponent(document.referrer));ao=w.doReplace(ao,"__player-height__",k.getHeight());ao=w.doReplace(ao,"__player-width__",k.getWidth());ao=w.doReplace(ao,"__domain__",encodeURIComponent(ac()));if(o.companion){ao=w.doReplace(ao,"__companion-div__",o.companion.id)}else{ao=w.doReplace(ao,"__companion-div__","")}var au=ao.match(new RegExp(/__item-[a-z 0-9 A-Z]*__/g));for(var aq=0;au&&aq<au.length;aq++){var ap=au[aq];var av=ap.substring(7,ap.length-2);if(ar.hasOwnProperty(av)&&ar[av]&&(typeof ar[av]=="string")){var at=ar[av];if(at.length>1000){at=at.substring(0,1000)}ao=w.doReplace(ao,ap,encodeURIComponent(at))}else{ao=w.doReplace(ao,ap,"")}}return ao};w.doReplace=function(an,ap,ao){return an.replace(ap,ao)};w.jwPauseAd=function(){var an=J.getState();if(an==d.state.PLAYING||an==d.state.BUFFERING){J.pause()}else{if(an==d.state.PAUSED){J.play()}}};w.jwPlayAd=function(ao){var an={_adTag:ao,_offset:0};if(k.isBeforeComplete()||n=="post"){n="post";W=c;k.detachMedia();am(an)}else{if(k.getState()==d.state.PLAYING){n="mid";am(an)}else{if(k.isBeforePlay()||n=="pre"){af=c;n="pre";am(an)}}}};function P(){if(l()){J.stop()}}function V(an){var ap=(an&&an.data&&an.data.trackers)?an.data.trackers:{};C=an.data;u();if(ap.impression){ap.impression.push(X)}else{ap.impression=new Array();ap.impression.push(X)}var ao=new g.tracker(ap,H);if(!C.media||!C.media.length){ao.error();k.dispatchEvent(d.JWPLAYER_AD_ERROR,{message:"Ad Error: Ad Tag Empty",tag:t});return}if(H){b._[H].trackingURL=X}if(k.getRenderingMode()=="flash"&&C.media[0].api&&C.media[0].api.toLowerCase()=="vpaid"){Z(ao)}else{ae(ao)}}function ae(aq){var an={sources:[]};a.foreach(C.media,function(au,ar){var at={};at.file=ar.file;at.type=ar.type;an.sources.push(at)});var ap=new b.playlist.item(an),ao={skipoffset:(o.skipoffset>=0?o.skipoffset:-1),tag:t,tracker:aq};flashMode=(k.getRenderingMode()=="flash"),newSources=a.filterSources(ap.sources,flashMode);if(!newSources.length){aq.error();k.dispatchEvent(d.JWPLAYER_AD_ERROR,{message:"Ad Error: No Compatible Creatives",tag:t});return}I=f;J=k.loadInstream(an,ao);J.onMute(S);J.onPlay(N);J.onComplete(r);k.onFullscreen(E);J.onPause(z);J.onTime(v);J.onClick(y);J.onError(B);aa[t]=J;if(k.getRenderingMode()=="flash"){J.onMediaError(B);J.setClick(C.clickthrough?C.clickthrough:"")}}function Z(an){P();I=f;J=new g.vpaidplayer(k,C.media[0].file,an,t);J.onTime(v);J.onClick(y);J.onPause(z);J.onPlay(N);J.onError(B);J.onComplete(r);J.onExpandedChange(q);aa[t]=J}function O(an){if(an&&an.indexOf("://")>=0){if(an.split("/")[2]!=e.location.href.split("/")[2]){return c}}return f}function K(an){if(an=="VAST could not be loaded"&&O(t)&&k.getRenderingMode()=="flash"){var ao=w.doReplacement(t);b._=b._||{};b._[k.id]=b._[k.id]||{};b._[k.id]["_flashLoadSuccess"]=G;b._[k.id]["_flashLoadFail"]=s;k.callInternal("jwLoadXML",ao,"jwplayer._."+k.id+"._flashLoadSuccess","jwplayer._."+k.id+"._flashLoadFail")}else{a.log(an);var ap=F.trackers();if(ap&&ap.error){(new g.tracker(ap,H)).error()}if(n=="post"){k.attachMedia()}k.releaseState();k.dispatchEvent(d.JWPLAYER_AD_ERROR,{message:"Ad Error: Invalid Ad Tag",tag:t})}}function Y(ao){var an="";if(document.implementation&&document.implementation.createDocument){an=new DOMParser().parseFromString(ao,"text/xml")}else{if(window.ActiveXObject){an=new ActiveXObject("Microsoft.XMLDOM");an.loadXML(ao)}}return an}function G(ao){var an=Y(ao);F.xmlComplete({responseXML:an})}function s(ao){a.log(ao);if(n=="post"){k.attachMedia()}var an=F.trackers();if(an&&an.error){(new g.tracker(an,H)).error()}k.dispatchEvent(d.JWPLAYER_AD_ERROR,{message:"Ad Error: Invalid Ad Tag",tag:t});k.releaseState()}function B(an){var ap=j(an.tag);a.log("Error playing back video ad");ab=f;I=c;if(n=="post"){k.attachMedia()}var ao="Ad Error: Error Playing Ad Tag";if(an.message&&an.message.indexOf("File could not be played")!=-1){ao="Ad Error: Error Playing Creative"}if(ap){ap.error()}k.dispatchEvent(d.JWPLAYER_AD_ERROR,{message:ao,tag:t})}function l(){return A("vpaid")}function x(){return A("instream")}function A(an){return J&&J.type==an}function y(an){var ao=J.getState();if(l()){if(ao!=d.state.PAUSED){J.pause();J.tracker.click();k.dispatchEvent(d.JWPLAYER_AD_CLICK,{tag:t});if(C.clickthrough){e.open(C.clickthrough)}}else{J.play()}return}if((k.getRenderingMode()!="flash")&&((an.hasControls&&ao==d.state.PAUSED)||(!an.hasControls&&ao!=d.state.PAUSED))){J.tracker.click();k.dispatchEvent(d.JWPLAYER_AD_CLICK,{tag:t});if(ao!=d.state.PAUSED){J.pause()}if(C.clickthrough){e.open(C.clickthrough)}}else{if(k.getRenderingMode()=="flash"){k.dispatchEvent(d.JWPLAYER_AD_CLICK,{tag:t})}}}function S(an){var ao=j(an.tag);if(!ao){return}if(an.mute){ao.mute();if(l()){J.setVolume(0)}}else{ao.unmute();if(l()){J.setVolume(k.getVolume()/100)}}}function E(an){var ao=j(an.tag);if(ao&&an.fullscreen&&ab){ao.fullscreen()}if(l()){J.resize()}}function U(an){if(l()){J.resize()}}function j(an){var ao=an?aa[an]:J;if(ao){return ao.tracker}}function z(an){var ao=j(an.tag);if(ao){ao.pause()}}function N(an){var ao=j(an.tag);if(!ao){return}if(!ab){var ap;if(C.companions){ap=h(C.companions);k.dispatchEvent(d.JWPLAYER_AD_COMPANIONS,{tag:t,companions:ap})}ap=L(C.companions);if(o.companion&&ap.length){m=R.addCompanion(o.companion,ap)}ab=c;ao.impression();k.dispatchEvent(d.JWPLAYER_AD_IMPRESSION,{tag:t});ao.start();ao.creativeView()}else{if(an.oldstate=="PAUSED"){ao.resume()}}}function h(aq){var at=[];for(var ar=0;ar<aq.length;ar++){var ao=aq[ar];var ap=(ao.type=="iframe"||ao.type=="html")?ao.type:"static";var an={width:ao.width,height:ao.height,type:ap,resource:ao.source,click:ao.clickthrough};at.push(an)}return at}function L(an){var ap=[];for(var ao=0;an&&ao<an.length;ao++){if(an[ao].type.indexOf("flash")<0){ap.push(an[ao])}}return ap}function r(an){var ao=j(an.tag);if(ao&&!I){ao.complete();ao.close();k.dispatchEvent(d.JWPLAYER_AD_COMPLETE,{tag:t})}ab=f;if(n=="post"){k.attachMedia()}}function v(an){var au=an.position,ao=an.duration,ar=o.dynamicMessage,aq=o.skipoffset,at=ao-au,ap=j(an.tag);if(ap){ap.time(au,ao)}if(at>0&&x()){if(ar){J.setText(ar.replace(/xx/gi,Math.round(at)))}if(aq>=0){J.updateSkipTime(Math.round(aq-au),t)}}k.dispatchEvent(d.JWPLAYER_AD_TIME,{tag:t,position:au,duration:ao})}function q(an){var ao=j(an.tag);if(ao){an.expanded?ao.expand():ao.collapse()}}function ac(){var an=e.location.href;an=an.match(new RegExp(/^https?:\/\/([^\/]*)/));if(an.length>1){return an[1]}return""}function M(){var an=e.location.href;p.domain=ac();p.trackingbase=an.match(/^https/)?"https://s.n.jwpltx.com/v1/adclient/ping.gif":"http://i.n.jwpltx.com/v1/adclient/ping.gif";var ao=new a.key(b.key);p.account=ao.token();var ap=ao.edition();if(ap=="invalid"){p.edition=4}else{if(ap=="ads"){p.edition=3}else{if(ap=="premium"){p.edition=2}else{if(ap=="pro"){p.edition=1}else{p.edition=0}}}}p.hosting=b.defaults&&b.defaults.ph?b.defaults.ph:0}function u(){var an=new Object(),ao=c;an.d=p.domain;an.c="vast";an.m="html5";an.a=p.account;an.co=m;an.p=n;an.ad=C.adsystem;an.type="linear";an.ph=p.hosting;an.ed=p.edition;X=p.trackingbase;a.foreach(an,function(aq,ap){if(ao){X+="?";ao=f}else{X+="&"}X+=aq;X+="=";X+=ap})}};b().registerPlugin("vast","6.3",b.vast.adcontroller,"vast.swf")})(jwplayer);(function(a){a.vast.companion=function(d){var i=this,g=a.utils,c,f;if(d){window.jwplayer["companionvast"]=[]}i.addCompanion=function(l,j){c=l;f=document.getElementById(c.id);if(!f){return false}for(var k=0;k<j.length;k++){if(e(j[k])){h(j[k]);return true}}return false};i.removeCompanion=function(){f.innerHTML=""};function b(l){l=l.creativeView;if(!l){return}for(var j=0;j<l.length;j++){var k=new Image();k.src=l[j];if(d){window.jwplayer["companionvast"].push(l[j])}}}function h(k){if(k.type=="html"){f.innerHTML=k.source;b(k.trackers);return}if(k.type=="iframe"){var l=document.createElement("iframe");l.height=c.height;l.width=c.width;l.src=k.source;l.scrolling="no";l.style.border="none";l.marginWidth=0;l.marginHeight=0;b(k.trackers);f.innerHTML="";f.appendChild(l);return}var j=new Image();j.src=k.source;if(g.exists(k.clickthrough)){j.onclick=function(m){var n=window.open(k.clickthrough,"_blank");n.focus()}}f.innerHTML="";f.appendChild(j);b(k.trackers)}function e(j){return j.width==c.width&&j.height==c.height}}})(jwplayer);(function(b){var a=b.utils;b.vast.configparser=function(){var f,c,d="Your video will resume in xx seconds.",e=-1;this.parse=function(h){f=new b.vast.schedule();c={};c.dynamicMessage=d;c.skipoffset=e;if(h.companiondiv){var g={};g.id=h.companiondiv.id;g.height=h.companiondiv.height;g.width=h.companiondiv.width;c.companion=g}if(h.admessage){c.dynamicMessage=h.admessage}if(h.skipoffset){c.skipoffset=h.skipoffset}if(h.tag&&typeof h.tag=="string"){var i={};i._offSet="pre";i._adTag=h.tag;f.setPreRoll(i)}else{a.foreach(h.schedule,function(k,j){var l={};l._offSet=j.offset;if(j.ad&&typeof j.ad.tag=="string"){l._adTag=j.ad.tag}else{if(j.tag&&typeof j.tag=="string"){l._adTag=j.tag}else{a.log("Error: no ad tag provided");return}}switch(j.offset){case"pre":f.setPreRoll(l);break;case"post":f.setPostRoll(l);break;default:if(isNaN(j.offset)){}else{f.addMidRoll(l)}break}})}f.sort()};this.getSchedule=function(){return f};this.getOptParams=function(){return c}}})(jwplayer);(function(a){a.vast.schedule=function(){var d,c=new Array(),b=0,e;this.setPreRoll=function(f){d=f};this.getPreRoll=function(){return d};this.getPostRoll=function(){return e};this.getNextMidRoll=function(g){if(c.length>=b+1){var f=c[b];if(f._offSet<g){b++;return f}}};this.reset=function(){b=0};this.addMidRoll=function(f){c.push(f)};this.setPostRoll=function(f){e=f};this.sort=function(){c.sort(function(g,f){return g._offSet-f._offSet})}}})(jwplayer);(function(a){a.vast.tracker=function(e,b){var c=0,g=this,h;if(b){a._=a._||{};a._[b]=a._[b]||{};a._[b].trackedvast=a._[b].trackedvast||{};h=a._[b].trackedvast}function i(k){if(e.hasOwnProperty(k)){return e[k]}return[]}function j(l){var n=i(l),k;if(h){h[l]=(h[l]||[])}for(k=0;k<n.length;k++){var m=new Image();m.src=n[k];if(h){h[l].push(n[k])}}}function d(n,m){var o=0.25*m,l=0.5*m,k=0.75*m;if(n>=o&&c<o){j("firstQuartile")}else{if(n>=l&&c<l){j("midpoint")}else{if(n>=k&&c<k){j("thirdQuartile")}}}c=n}function f(k){return function(){j(k)}}g.creativeView=f("creativeView");g.start=f("start");g.click=f("click");g.complete=f("complete");g.pause=f("pause");g.resume=f("resume");g.mute=f("mute");g.unmute=f("unmute");g.fullscreen=f("fullscreen");g.expand=f("expand");g.collapse=f("collapse");g.acceptInvitation=f("acceptInvitation");g.close=f("close");g.rewind=f("rewind");g.impression=f("impression");g.error=f("error");g.time=d}})(jwplayer);(function(b){var c=b.events,a=b.utils,d=b.vast;d.vloader=function(){var l=this,f,g={};function j(){a.extend(l,new c.eventdispatcher())}l.load=function(m){f=m;a.ajax(f,i,e)};l.xmlComplete=i;l.trackers=function(){return g.trackers};function i(n){try{new d.vparser().parse(n.responseXML,g);if(g.wrappedURI){var m=a.getAbsolutePath(g.wrappedURI,f);delete g.wrappedURI;l.load(m)}else{h(g)}}catch(o){k(c.ERROR,"There was an error parsing VAST response")}}function e(m){if(m=="Invalid XML"){k(c.ERROR,"Invalid XML")}else{k(c.ERROR,"VAST could not be loaded")}}function h(m){if(m){k(c.COMPLETE,{data:m})}else{k(c.ERROR,"There was an error parsing VAST response")}}function k(m,n){return l.sendEvent(m,n)}j()}})(jwplayer);(function(a){a.vast.vpaidevents={AD_LOADED:"AdLoaded",AD_STARTED:"AdStarted",AD_STOPPED:"AdStopped",AD_LINEAR_CHANGE:"AdLinearChange",AD_EXPANDED_CHANGE:"AdExpandedChange",AD_REMAINING_TIME_CHANGE:"AdRemainingTimeChange",AD_VOLUME_CHANGE:"AdVolumeChange",AD_IMPRESSION:"AdImpression",AD_VIDEO_START:"AdVideoStart",AD_VIDEO_FIRST_QUARTILE:"AdVideoFirstQuartile",AD_VIDEO_MIDPOINT:"AdVideoMidpoint",AD_VIDEO_THIRD_QUARTILE:"AdVideoThirdQuartile",AD_VIDEO_COMPLETE:"AdVideoComplete",AD_CLICK_THRU:"AdClickThru",AD_USER_ACCEPT_INVITATION:"AdUserAcceptInvitation",AD_USER_MINIMIZE:"AdUserMinimize",AD_USER_CLOSE:"AdUserClose",AD_PAUSED:"AdPaused",AD_PLAYING:"AdPlaying",AD_LOG:"AdLog",AD_ERROR:"AdError"}})(jwplayer);(function(d){var h=d.vast,b="PLAYING",c="PAUSED",a="BUFFERING",g="IDLE",e=true,f=false;h.vpaidplayer=function(O,y,E,L){var p=O,M,P=y,B=f,R=-1,r=f,o=this,i=new d.events.eventdispatcher(),H=h.vpaidevents,l=L,I={TIME:"onTime",CLICK:"onClick",PLAY:"onPlay",PAUSE:"onPause",ERROR:"onError",COMPLETE:"onComplete",EXPANDED_CHANGE:"onExpandedChange"};function N(){o.tracker=E,o.type="vpaid",d._=d._||{};d._[p.id]=d._[p.id]||{};p.callInternal("jwLoadVPAID",P,k(u),k(Q))}function u(){C(H.AD_LOADED,w);C(H.AD_STARTED,G);C(H.AD_LINEAR_CHANGE,q);C(H.AD_EXPANDED_CHANGE,s);C(H.AD_PAUSED,F);C(H.AD_PLAYING,J);C(H.AD_STOPPED,z);C(H.AD_REMAINING_TIME_CHANGE,D);C(H.AD_CLICK_THRU,m);C(H.AD_ERROR,Q);j("initAd",p.getWidth(),p.getHeight(),p.getFullscreen()?"fullscreen":"normal",0)}function Q(){v(I.ERROR)}function v(S,T){T=T||{};if(!T.tag){T.tag=l}i.sendEvent(S,T)}this.setVolume=function(S){n("adVolume",S)};function w(){q();j("startAd")}function G(){v(I.PLAY,{oldstate:a,newstate:b})}function m(){v(I.CLICK)}function q(){var T=p.getState();M=A("adLinear");if(M){if(T==b||T==a){B=e;p.pause();p.setControls(f)}}else{if(B){p.play(e);p.setControls(e)}}if(!M){var S=p.getSafeRegion();j("resizeAd",p.getWidth(),S.height+S.y,p.getFullscreen()?"fullscreen":"normal")}else{j("resizeAd",p.getWidth(),O.getHeight(),p.getFullscreen()?"fullscreen":"normal")}}function s(){var S=A("adExpanded");v(I.EXPANDED_CHANGE,{expanded:S})}function z(){if(B){p.play(e);p.setControls(e)}v(I.COMPLETE)}function F(){if(!r){r=e;v(I.PAUSE,{newstate:c,oldstate:b})}}function J(){if(r){r=f;v(I.PLAY,{newstate:b,oldstate:c})}}function D(){var S=A("adRemainingTime");if(R<0){R=S}v(I.TIME,{position:R-S,duration:R})}function j(){var S=Array.prototype.slice.call(arguments);S.unshift("jwCallVPAID");setTimeout(function(){p.callInternal.apply(this,S)},0)}function A(S){return p.callInternal("jwGetVPAIDProperty",S)}function n(T,S){p.callInternal("jwSetVPAIDProperty",T,S)}function C(S,T){p.callInternal("jwAddVPAIDListener",S,k(T))}function k(T){var S="_vpaidBridge"+Math.floor(Math.random()*10000);d._[p.id][S]=t(T);return"jwplayer._['"+p.id+"']['"+S+"']"}function t(S){return function(){setTimeout(S,0)}}function K(S){return function(T){i.addEventListener(S,T)}}function x(S){d.vpaidEventHandler(S)}o.onTime=K(I.TIME);o.onComplete=K(I.COMPLETE);o.onClick=K(I.CLICK);o.onPlay=K(I.PLAY);o.onPause=K(I.PAUSE);o.onError=K(I.ERROR);o.onExpandedChange=K(I.EXPANDED_CHANGE);o.play=function(){j("resumeAd")};o.pause=function(){j("pauseAd")};o.stop=function(){j("stopAd")};o.resize=function(S){if(!M){var T=p.getSafeRegion();j("resizeAd",p.getWidth(),T.height+T.y,S?"fullscreen":"normal")}else{j("resizeAd",p.getWidth(),O.getHeight(),S?"fullscreen":"normal")}};o.getState=function(){if(!A("adLinear")){return g}else{return r?c:b}};N()}})(jwplayer);(function(c){var d=c.events,a=c.utils,b=a.extensionmap;c.vast.vparser=function(){var o=c.parsers,j=o.textContent;function k(p,q){if(!p){return[]}return p.getElementsByTagName(q)}function n(p,q){if(!p){return null}return p.getAttribute(q)}this.parse=function(t,s){var r=k(t,"VAST")[0]?k(t,"VAST")[0]:k(t,"VideoAdServingTemplate")[0],u=r.tagName=="VideoAdServingTemplate"?1:n(r,"version"),w=k(r,"Ad")[0],v=k(w,"InLine")[0],p=k(w,"Wrapper")[0],q=v?v:p,x;s.adsystem=j(k(t,"AdSystem")[0]);if(u==""||u>2||u<1){throw"Vast version not supported";return}if(q){if(u==2){g(q,s);e(q,"Impression",s.trackers);e(q,"Error",s.trackers)}else{h(q,s)}if(p){s.wrappedURI=j(k(p,"VASTAdTagURI")[0])||j(k(p,"VASTAdTagURL")[0])}}else{throw"Invalid VAST response"}};function e(s,r,t){var p=k(s,r),q;for(q=0;q<p.length;q++){i(t,r.toLowerCase(),j(p[q]))}}function i(r,q,p){if(!r[q]){r[q]=[]}r[q].push(p)}function g(t,q){var C=k(k(t,"Creatives")[0],"Creative"),u=q.trackers?q.trackers:{},x,s,r,v,A,w,p,y,z,B;for(s=0;s<C.length;s++){x=C[s];v=k(x,"Linear")[0];A=k(x,"NonLinear")[0];w=k(k(x,"TrackingEvents")[0],"Tracking");for(r=0;r<w.length;r++){p=w[r];i(u,n(p,"event"),j(p))}if(v){y=k(v,"VideoClicks")[0];z=j(k(y,"ClickThrough")[0]);B=j(k(y,"ClickTracking")[0]);if(z){q.clickthrough=z}if(B){i(u,"click",B)}f(v,q)}else{if(A){z=j(k(A,"NonLinearClickThrough")[0]);if(z){q.clickthrough=z}m(x,q)}else{l(x,q)}}}q.trackers=u}function h(C,r){var w=k(C,"Video")[0],t=k(C,"NonLinear")[0],u=r.trackers?r.trackers:{},G,E,x,v,p,H,B,I,q,s,y,z;if(w){G=k(k(C,"TrackingEvents")[0],"Tracking");for(E=0;E<G.length;E++){x=G[E];i(u,n(x,"event"),j(x).trim())}v=k(k(C,"Impression")[0],"URL");for(E=0;E<v.length;E++){x=v[E];i(u,"impression",j(x).trim())}p=k(k(C,"Error")[0],"URL");for(E=0;E<p.length;E++){x=p[E];i(u,"error",j(x).trim())}I=k(w,"VideoClicks")[0];q=j(k(I,"ClickThrough")[0]).trim();s=j(k(I,"ClickTracking")[0]).trim();if(q){r.clickthrough=q}if(s){i(u,"click",s)}f(w,r);y=k(w,"AdParameters")[0];if(y){z=n(y,"apiFramework");if(z.toLowerCase()=="vpaid"){for(var F=0;F<r.media.length;F++){r.media[F].api=z}}}}else{if(t){var D=[],A=k(t,"URL")[0];D.push({type:n(t,"creativeType"),file:j(A).trim(),api:n(t,"apiFramework")});r.media=D}}H=k(C,"CompanionAds")[0];H=k(H,"Companion");if(!r.companions){r.companions=[]}for(E=0;E<H.length;E++){B=H[E];r.companions.push({width:parseInt(n(B,"width")),height:parseInt(n(B,"height")),type:n(B,"resourceType"),resource:j(k(B,"URL")[0]).trim(),trackers:[],clickthrough:""})}r.trackers=u}function f(q,r){var p=k(k(q,"MediaFiles")[0],"MediaFile"),u=r.media?r.media:[],s,t;for(t=0;t<p.length;t++){u.push({type:n(p[t],"type"),file:j(p[t]).trim(),api:n(p[t],"apiFramework")||""})}r.media=u}function m(s,p){var r=[],q=k(s,"StaticResource")[0];r.push({type:n(q,"creativeType"),file:j(q).trim(),api:n(k(s,"NonLinear")[0],"apiFramework")});p.media=r}function l(y,r){var D=k(k(y,"CompanionAds")[0],"Companion"),A,u,s,B,C,t,p,q,x,x={},z,w,v=r.companions?r.companions:[];for(u=0;u<D.length;u++){A=D[u];B=k(A,"StaticResource")[0];C=k(A,"IFrameResource")[0];t=k(A,"HTMLResource")[0];if(B){p=n(B,"creativeType");q=j(B)}else{if(C){p="iframe";q=j(C)}else{if(t){p="html";q=j(t)}}}companionTrackerXML=k(k(A,"TrackingEvents")[0],"Tracking");for(s=0;s<companionTrackerXML.length;s++){z=n(companionTrackerXML[s],"event");i(x,z,j(companionTrackerXML[s]))}w=j(k(A,"CompanionClickThrough")[0]);v.push({width:parseInt(n(A,"width")),height:parseInt(n(A,"height")),type:p,source:q,trackers:x,clickthrough:w})}r.companions=v}}})(jwplayer);